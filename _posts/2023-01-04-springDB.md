---
title: "[SpringBoot] Spring Data JPA와 JPA Repository"
date: '2023-01-04 +0900'
description: 'Spring DB 프레임워크(ORM) 정리하기'
categories: [Study,Spring]
tags: [Java,Spring,DB]
pin: true
---

> 1월 1주차 스터디 발표 자료                      
> 개인 프로젝트를 진행하면서 도메인 설계 전에 Spring Data JPA에 대해 정리하고자 합니다!!😁  
> 이미지 사용 출처 : <https://youtu.be/OiAYmtq4Av8/>       

### **기초 개념**
---

#### **ORM(Object Relational Mapping)** ####         
객체가 테이블이 되도록 매핑시켜주는 프레임워크로, 프로그램의 복잡도를 줄이고 객체와 쿼리를 분리할 수 있다.    
트랜잭션 처리나 기타 데이터베이스 관련 작업들을 좀 더 편리하게 처리할 수 있는 프레임워크이다.      
ORM은 객체와 DB의 데이터를 자동으로 매핑해주기 때문에 직접 SQL문을 작성하지 않는다.       
**대표적 예시**: JPA,Hibernate [Persistent API]

#### **JPA(Java Persistent API)** ####         
JPA는 ORM과 관련된 인터페이스가 모아져있는 라이브러리, Java 진영의 표준 ORM이다.                                         
한마디로 ORM은 큰 개념이고 JPA는 ORM을 구체화한 구현체이다.

1. **Hibernate**                              
ORM 프레임워크 중 하나이다.                          
➔ JPA의 실제 구현체 중 하나이며, 현재 JPA 구현체 중 가장 많이 사용된다.
* **jpa의 구현체**
![jpa 구현체](/assets/img/jpa%EA%B5%AC%EC%A1%B0.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
2. **Spring Data JPA**                         
Spring 프레임워크에서 JPA를 편리하게 사용할 수 있게 지원하는 라이브러리
- CRUD 처리용 인터페이스 제공
- Repository 개발 시 인터페이스만 작성하면 구현 객체를 동적으로 생성해서 주입
- EntityManager를 자동으로 Bean으로 등록되기때문에, 직접 사용하지는 않는다.

➔ Hibernate에서 자주 사용되는 기능을 조금 더 쉽게 사용할 수 있게 구현해놓은 라이브러리
![jpa와 hibernate](/assets/img/jpa%EC%99%80hibernate.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
➔ 기존 JPA를 사용하려면 **EntityManager**를 주입받아 사용해야하지만, SpringDataJPA는 JPA를 한단계 더 추상화 시킨 **Repository 인터페이스**를 제공한다. 해당 구현체는 스프링이 자동으로 생성해준다.
* **jpaRepository**는 Spring Data JPA에서 제공하는 JPA 구현을 위한 인터페이스로, 간단한 상속만으로 사전에 정의된 메서드를 활용하여 DB에 create/read/update/delete 쿼리를 수행한다.
![JPA와 springDataJPA](/assets/img/jpa%EC%99%80springdataJPA.png){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
![JPA와 레포지토리 상속](/assets/img/jpa%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC%EC%83%81%EC%86%8D.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }

2-1.**jpaRepository**                               

jpaRepository 인터페이스에 들어가보면, Spring Data JPA에서 사용하는 메서드가 정의되어있다.
![JPA와 레포지토리](/assets/img/jpa%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
- jpaRepository는 SimpleJpaRepository 클래스에서 구현되어있다. 
![레포지토리구현체](/assets/img/%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC%EA%B5%AC%ED%98%84%EC%B2%B4.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
- jpaRepository는 내부적으로 EntityManager가 대상 Entity의 데이터를 관리하고있기 때문에, 별도의 EntityManager의 구현이 필요없다.
![entityManager](/assets/img/em.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }
![jpa레포지토리의 em](/assets/img/jpa%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC%EC%9D%98%20em.jpg){:style="border:0.2px solid ; border-radius: 6px; padding: 0px;" }

